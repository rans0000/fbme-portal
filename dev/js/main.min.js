!function(){"use strict";function e(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",e.defaults.paramSerializer="$httpParamSerializerJQLike"}function r(e,r,t){r.otherwise("/login"),t.interceptors.push("httpRequestInterceptor"),e.state("login",{url:"/login",templateUrl:"js/modules/login/login.template.html",controller:"LoginController",controllerAs:"login"}).state("root",{abstract:!0,views:{"":{templateUrl:"js/modules/contentArea/contentArea.template.html"},"headerArea@root":{templateUrl:"js/modules/headerArea/headerArea.template.html",controller:"HeaderAreaController",controllerAs:"header"}}}).state("dashboard",{url:"/dashboard",templateUrl:"js/modules/dashboard/dashboard.template.html",controller:"DashboardController",controllerAs:"vm"})}function t(e,r){function t(t){var a=t;return t.config.url.startsWith(r.apiBase)&&(a=t.data.header&&"FD200"!==t.data.header.responseCode?e.reject(t.data):t.data.body?t.data.body:{}),a}function a(r){var t={header:{responseCode:r.status,message:r.statusText,requestUrl:r.config.url}};return e.reject(t)}var n={};return n.response=t,n.responseError=a,n}function a(){return jQuery}function n(e){e.debugInfoEnabled(!1)}angular.module("app.core.module",["ui.router","ui.bootstrap","toastr","ngStorage","headerArea.module","ui.bootstrap.contextMenu","login.module","dashboard.module","role.module"]).config(e).config(r).config(n).factory("httpRequestInterceptor",t).factory("jQuery",a),e.$inject=["$httpProvider"],r.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"],t.$inject=["$q","webServiceURL"],n.$inject=["$compileProvider"]}(),function(){"use strict";function e(e){var r=this;r.css=e.getCss()}angular.module("app.core.module").controller("AppController",e),e.$inject=["utils"]}(),function(){"use strict";function e(){var e={apiBase:"http://localhost:8090/FDocs/api/",login:"auth/login.json",roleList:"role/list.json",roleDetails:"role/details.json",roleCreate:"role/create.json",roleUpdate:"role/update.json",roledelete:"role/delete.json"};return e}function r(){var e={PERSONAL_DOCS:1,ADMIN:2,COLLABORATION_ADMIN:4,ROLE_MANAGEMENT:8,BRANCH_MANAGEMENT:16,DEPARTMENT_MANAGEMENT:32,SETTINGS_MANAGEMENT:64,USER_MANAGEMENT:128,USER_GROUP_MANAGEMENT:256};return e}angular.module("app.core.module").constant("webServiceURL",e()).constant("permissions",r())}(),function(){"use strict";angular.module("dashboard.module",[])}(),function(){"use strict";angular.module("headerArea.module",[])}(),function(){"use strict";angular.module("login.module",[])}(),function(){"use strict";function e(e){e.state("root.role",{url:"/role",templateUrl:"js/modules/role/role.template.html",controller:"RoleController",controllerAs:"role"})}angular.module("role.module",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(){function e(e){n=angular.copy(e),n.privilegeArray=n.privileges.split(","),e=null}function r(){return angular.copy(n)}function t(e){var r;if(!n.hasOwnProperty)throw{message:"Missing property in Current user profile"};return r=n[e]}function a(e){var r=n.privilegeArray.indexOf(e)!==-1;return r}var n,o={};return o.saveCurrentUserProfile=e,o.getAllCurrentUserProfile=r,o.getCurrentUserProfile=t,o.hasPermission=a,o}angular.module("app.core.module").factory("userService",e)}(),function(){"use strict";function e(e,r,t){function a(){return t.lang=t.lang||"en-US",t.lang}function n(e){t.lang=e}function o(){return t.css=t.css||"lang-en",t.css}function l(e){t.css=e}function i(r){var t=d?e.resolve(d):c(r);return t}function c(t){var a="data/translations/translations.all-"+t+".json";return r.get(a).then(function(e){return e.data.translation}).catch(function(r){return e.reject(r)})}function s(){return[{name:"English",langCode:"en-US",css:"lang-en",direction:"ltr"},{name:"العَرَبِيَّة",langCode:"ar",css:"lang-ar",direction:"rtl"}]}function u(e){var r;switch(e){case"FD200":r="cmcm_Success";break;case"FD207":r="cmcm_MultipleStatusCodes";break;case"FD400":r="cmcm_BadRequest";break;case"FD500":r="cmcm_ServerError";break;case"FD401":r="cmcm_UnauthorizedAccess";break;case"FD501":r="cmcm_UnsupportedOperation";break;case"FD412":r="cmcm_LoginRequired";break;case"FD406":r="cmcm_InvalidCredentials";break;case"FD101":r="cmcm_ValidUserNameRequired";break;case"FD102":r="cmcm_ValidPasswordRequired";break;case"FD103":r="cmcm_ValidNameRequired";break;case"FD104":r="cmcm_ValidDescriptionRequired";break;case"FD105":r="cmcm_ValidIdRequired";break;case"FD106":r="cmcm_ValidIdsRequired";break;case"FD107":r="cmcm_ValidPageRequired";break;case"FD108":r="cmcm_ValidPageSizeRequired";break;case"FD109":r="cmcm_ValidSortByRequired";break;case"FD110":r="cmcm_NameNotAvailable";break;case"FD111":r="cmcm_RoleIsInUse";break;case"FD112":r="cmcm_RoleNotFound";break;case"FD113":r="cmcm_CodeNotAvailable";break;case"FD114":r="cmcm_ValidCodeRequired";break;case"FD115":r="cmcm_ValidAddress1Required";break;case"FD116":r="cmcm_ValidAddress2Required";break;case"FD117":r="cmcm_ValidAddress3Required";break;case"FD118":r="cmcm_ValidAddress4Required";break;case"FD119":r="cmcm_ValidZipRequired";break;case"FD120":r="cmcm_BranchNotFound";break;case"FD121":r="cmcm_DepartmentNotFound";break;case"FD122":r="cmcm_ValidFirstNameRequired";break;case"FD123":r="cmcm_ValidMiddleNameRequired";break;case"FD124":r="cmcm_ValidLastNameRequired";break;case"FD125":r="cmcm_ValidEmailRequired";break;case"FD126":r="cmcm_ValidTimeZoneRequired";break;case"FD127":r="cmcm_ValidActivationDateRequired";break;case"FD128":r="cmcm_ValidDateFormatRequired";break;case"FD129":r="cmcm_UserNameNotAvailable";break;case"FD130":r="cmcm_EmailIdNotAvailable";break;case"FD131":r="cmcm_UserNotFound";break;default:r="cmcm_UnknownError"}return r}var d,m={};return m.getLanguage=a,m.setLanguage=n,m.getCss=o,m.setCss=l,m.getTranslation=i,m.getLanguagesAvailable=s,m.errorHandler=u,m}angular.module("app.core.module").factory("utils",e),e.$inject=["$q","$http","$localStorage"]}(),function(){"use strict";function e(){var e=this;e.status=!0}angular.module("dashboard.module").controller("DashboardController",e),e.$inject=[]}(),function(){"use strict";function e(){var e={};return e}angular.module("dashboard.module").factory("dashboardService",e),e.$inject=[]}(),function(){"use strict";function e(e){function r(){t.currentUser=e.populateCurrentUserObj()}var t=this;t.currentUser={},r()}angular.module("headerArea.module").controller("HeaderAreaController",e),e.$inject=["headerAreaService"]}(),function(){"use strict";function e(e){function r(){return e.getAllCurrentUserProfile()}var t={};return t.populateCurrentUserObj=r,t}angular.module("headerArea.module").factory("headerAreaService",e),e.$inject=["userService"]}(),function(){"use strict";function e(e,r,t,a,n){function o(){var e=a.getLanguage();p.selectedLanguage=p.languagesAvailable.find(function(r){return r.langCode===e}),l(e)}function l(e){a.getTranslation(e).then(i).catch(c)}function i(e){console.log(e),p.translation=e}function c(e){console.log(e),t.error(p.translation.cmcm_TranslationLoadError)}function s(){var e=r.validateLoginForm(p.user);e&&r.requestLogin(p.user).then(u).catch(d)}function u(t){r.saveCurrentUserProfile(t.items[0]),e.go("dashboard")}function d(e){var a=r.getErrorTranslationValue(e.header.responseCode);t.error(a,"Login Error")}function m(){var e=p.selectedLanguage.langCode;a.setLanguage(e),l(e),n.$parent.app.css=p.selectedLanguage.css,a.setCss(p.selectedLanguage.css)}var p=this;p.user={name:"",password:""},p.translation={},p.languagesAvailable=a.getLanguagesAvailable(),p.selectedLanguage=null,p.onLoginSubmit=s,p.onLanguageChange=m,o()}angular.module("login.module").controller("LoginController",e),e.$inject=["$state","loginService","toastr","utils","$scope"]}(),function(){"use strict";function e(e,r,t,a){function n(e){var r=!(!e.name.trim()||!e.password.trim());return r}function o(t){var a={userName:t.name,Password:t.password},n=r.apiBase+r.login;return e.post(n,a)}function l(e){a.saveCurrentUserProfile(e)}function i(e){return t.errorHandler(e)}var c={};return c.validateLoginForm=n,c.requestLogin=o,c.saveCurrentUserProfile=l,c.getErrorTranslationValue=i,c}angular.module("login.module").factory("loginService",e),e.$inject=["$http","webServiceURL","utils","userService"]}(),function(){"use strict";function e(e,r,t){function a(){n()}function n(){o()}function o(){e.loadRoleList(U.searchOptions).then(l).catch(i)}function l(e){U.roleList=e.items,U.searchOptions.totalItems=e.totalNumPages}function i(r){var a=e.getErrorTranslationValue(r.header.responseCode);t.error(a,"Error at listing Role")}function c(e){U.deletePopupData=s(),U.deletePopupData.successResult=e.id,U.deletePopupData.description="Do you want to delete this role ("+e.name+")?";var t=r.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"js/modules/common/confirmDialog/confirm.dialog.template.html",controller:"ModalInstanceCtrl",controllerAs:"$ctrl",resolve:{dialogData:function(){return U.deletePopupData}}});t.result.then(u)}function s(){var e={headingText:"Delete Role",confirmText:"Yes",cancelText:"No",description:"",successResult:"",cancelResult:"cancel"};return e}function u(r){var t={ids:[r]};e.deleteRole(t).then(d).catch(m)}function d(e){console.log(e),t.success("Deleted the role","Delete Role"),o()}function m(r){var a=e.getErrorTranslationValue(r.header.responseCode);t.error(a,"Error at listing Role")}function p(r){var t={id:r.id};e.loadRoleDetails(t).then(f).catch(g)}function f(e){U.updateRolePopupData.item=e.items[0];var t=r.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"js/modules/role/create-update/role.create.update.template.html",controller:"RoleUpdateController",controllerAs:"roleDialog",size:"sm",resolve:{dialogData:function(){return U.updateRolePopupData}}});t.result.then(v)}function g(r){console.log(r);var a=e.getErrorTranslationValue(r.header.responseCode);t.error(a,"Error at loading Role details")}function v(){o()}function h(){var e={headingText:"Update Role",confirmText:"Update",cancelText:"Cancel",description:"",successResult:"",cancelResult:"cancel",currentPermissions:[],item:null,mode:"update",translation:null};return e}function b(){U.createRolePopupData.item={name:"",description:"",privileges:""};var e=r.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"js/modules/role/create-update/role.create.update.template.html",controller:"RoleUpdateController",controllerAs:"roleDialog",size:"sm",resolve:{dialogData:function(){return U.createRolePopupData}}});e.result.then(D)}function D(){o()}function R(){var e={headingText:"Create Role",confirmText:"Create",cancelText:"Cancel",description:"",successResult:"",cancelResult:"cancel",currentPermissions:[],item:null,mode:"create",translation:null};return e}function A(){var e=U.idList.split(/\s*,\s*/).map(function(e){return parseInt(e.trim(),10)}).filter(function(e){return!isNaN(e)}).join(",");U.searchOptions.createdByUserIds=e||void 0,o()}function F(){var e=new Date,r=new Date(e);r.setFullYear(r.getFullYear()-1);var t={totalItems:0,page:1,pageSize:30,sortBy:"name",sortOrder:"A",searchText:"",createdDateFrom:r,createdDateTo:e,createdByUserIds:[]};return t}function C(){var e={isOpen:!1,dateCreatedFromIsOpen:!1,dateCreatedToIsOpen:!1};return e}var U=this;U.roleList=[],U.isExpandedState=!0,U.deletePopupData={},U.updateRolePopupData=h(),U.createRolePopupData=R(),U.itemTree=e.getSidenavItems(),U.selectedFolder=U.itemTree[0],U.searchOptions=F(),U.advSearch=C(),U.idList="",U.onDeleteRoleInitiate=c,U.onUpdateRoleInitiate=p,U.onCreateRoleInitiate=b,U.loadRoleData=A,a()}angular.module("role.module").controller("RoleController",e),e.$inject=["roleService","$uibModal","toastr"]}(),function(){"use strict";function e(e,r,t,a){function n(t){var a=r.apiBase+r.roleList;return e.get(a,{params:t})}function o(t){var a=r.apiBase+r.roledelete;return e.post(a,t)}function l(t){var a=r.apiBase+r.roleCreate;return e.post(a,t)}function i(t){var a=r.apiBase+r.roleUpdate;return e.post(a,t)}function c(t){var a=r.apiBase+r.roleDetails;return e.get(a,t)}function s(e){var r=e.split(","),t={unselected:{},selected:{}};for(var n in a)r.indexOf(n)<0?t.selected[n]=!1:t.unselected[n]=!1;return t}function u(){var e=[{title:"Company Management",type:"Folder",children:[{title:"Role Management",type:"Folder"},{title:"Branch Management",type:"Folder"},{title:"Department Management",type:"Folder"},{title:"Settings",type:"Folder"}]},{title:"User Management",type:"Folder",children:[{title:"Public User Group Management",type:"Folder"}]}];return e}function d(e){return t.errorHandler(e)}var m={};return m.loadRoleList=n,m.loadRoleDetails=c,m.createRole=l,m.updateRole=i,m.deleteRole=o,m.getPermissionArray=s,m.getSidenavItems=u,m.getErrorTranslationValue=d,m}angular.module("role.module").factory("roleService",e),e.$inject=["$http","webServiceURL","utils","permissions"]}(),function(){"use strict";function e(e,r){var t=this;t.data=r,t.ok=function(){e.close(t.data.successResult)},t.cancel=function(){e.dismiss(t.data.cancelResult)}}angular.module("app.core.module").controller("ModalInstanceCtrl",e),e.$inject=["$uibModalInstance","dialogData"]}(),function(){"use strict";function e(e,r){function t(t,a,n,o){function l(e){e.stopPropagation(),o.isOpen=!o.isOpen,o.isOpen?i.children(".menu-tree").slideDown():(t.$emit("folderOpened"),i.children(".menu-tree").slideUp())}var i=r(a);o.toggleOpenState=l,angular.isArray(t.branch.item.children)&&e('<tree collection="branch.item.children" selected-folder="tree.selectedFolder"></tree>')(t,function(e){a.append(e)})}function a(e){function r(r){e.$emit("folderSelectFromTree",r)}function t(r,t){t===o.item?(o.isActive=!0,o.isOpen=!0,e.$emit("folderOpened")):o.isActive=!1}function a(){}function n(){var e=!1;return angular.forEach(o.item.children,function(r){"Folder"===r.type&&(e=!0)}),e}var o=this;o.isActive=o.item===o.selectedFolder,o.isOpen=!1,o.onItemClick=r,o.hasInnerFolder=n(),e.$on("folderSelectFromExplorer",t),e.$on("folderOpened",a)}var n={replace:!0,restrict:"E",scope:{item:"=",selectedFolder:"="},templateUrl:"js/modules/common/tree/branch.directive.template.html",link:t,controller:a,controllerAs:"branch",bindToController:!0};return a.$inject=["$scope"],n}angular.module("app.core.module").directive("branch",e),e.$inject=["$compile","jQuery"]}(),function(){"use strict";function e(e){function r(r,t){var a=e(t);t.on("click",function(){a.hasClass("active")?a.siblings(".menu-tree").slideDown():a.siblings(".menu-tree").slideUp()})}var t={restrict:"A",link:r};return t}angular.module("app.core.module").directive("slideToggle",e),e.$inject=["jQuery"]}(),function(){"use strict";function e(){function e(e,r){r.on("click",function(e){e.stopPropagation()})}function r(){}var t={replace:!0,restrict:"A",scope:{collection:"="},link:e,controller:r,controllerAs:"stopPropagation",bindToController:!0};return t}angular.module("app.core.module").directive("stopPropagation",e)}(),function(){"use strict";function e(){function e(){}function r(){}var t={replace:!0,restrict:"E",scope:{collection:"=",selectedFolder:"="},templateUrl:"js/modules/common/tree/tree.directive.template.html",link:e,controller:r,controllerAs:"tree",bindToController:!0};return t}angular.module("app.core.module").directive("tree",e)}(),function(){"use strict";function e(e,r,t,a,n){function o(){var e=!(!h.role.name||!h.role.description);return e}function l(e,r,t){if(Object.keys(e).length)for(var a in e)e.hasOwnProperty(a)&&(e[a]||t)&&(r[a]=!1,delete e[a])}function i(){h.activeTab=1}function c(){e.dismiss(h.data.cancelResult)}function s(){"create"===D?u():p()}function u(){var e=v(h.selectedPermissions),r={name:h.role.name,description:h.role.description,privileges:e};console.log(r),n.createRole(r).then(d).catch(m)}function d(){e.close(),t.success("Success","Creating Role")}function m(e){console.log(e);var r=n.getErrorTranslationValue(e.header.responseCode);t.error(r,"Error in creating Role")}function p(){var e=v(h.selectedPermissions),r={id:h.data.item.id,name:h.role.name,description:h.role.description,privileges:e};console.log(r),n.updateRole(r).then(f).catch(g)}function f(){e.close(),t.success("Success","Updating Role")}function g(e){console.log(e);var r=n.getErrorTranslationValue(e.header.responseCode);t.error(r,"Error in updating Role")}function v(e){var r="",t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a);return t.length&&(r=t.join(",")),r}var h=this;h.activeTab=0,h.data=r,h.role={name:r.item.name,description:r.item.description};var b=n.getPermissionArray(r.item.privileges),D=r.mode;h.unselectedPermissions=b.selected,h.selectedPermissions=b.unselected,h.validateRoleDetail=o,h.movePermissions=l,h.createUpdateRole=s,h.nextTab=i,h.cancel=c}angular.module("app.core.module").controller("RoleUpdateController",e),e.$inject=["$uibModalInstance","dialogData","toastr","utils","roleService"]}();
//# sourceMappingURL=main.min.js.map
